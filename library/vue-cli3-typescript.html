<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何引进 Typescript 到现存 Vue-cli3+项目中 | 学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/learn-path-recording-and-coding/favicon.ico">
    <link rel="manifest" href="/learn-path-recording-and-coding/manifest.json">
    <link http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="apple-touch-icon" size="72x72" href="/learn-path-recording-and-coding/assets/images/apple-touch-icon-72.png">
    <meta name="description" content="一个记录个人学习的笔记">
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="author" content="camel_lu">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no">
    <meta name="keywords" content="笔记，知识点，回忆，前端，计算机，汇总">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/learn-path-recording-and-coding/assets/css/0.styles.7fdb3e19.css" as="style"><link rel="preload" href="/learn-path-recording-and-coding/assets/js/app.ffc21df9.js" as="script"><link rel="preload" href="/learn-path-recording-and-coding/assets/js/2.bfcbf030.js" as="script"><link rel="preload" href="/learn-path-recording-and-coding/assets/js/29.05512e51.js" as="script"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/10.d1afa0f9.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/11.cc68f48d.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/12.559d4556.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/13.05bc9f00.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/14.22554b01.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/15.6e79ecc3.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/16.b7740180.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/17.d96310ab.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/18.a143247b.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/19.44419a4f.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/20.8631f014.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/21.ebb3f8b7.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/22.6b77ecbf.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/23.992afcf5.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/24.389110b9.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/25.480fbcee.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/26.ab36286d.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/27.5bc0df68.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/28.1439653b.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/3.52eb7ca3.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/30.d20aed44.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/31.38e22a14.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/4.ebcdfb4f.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/5.63246833.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/6.e8dcb645.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/7.886196f3.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/8.41832a71.js"><link rel="prefetch" href="/learn-path-recording-and-coding/assets/js/9.170c1e37.js">
    <link rel="stylesheet" href="/learn-path-recording-and-coding/assets/css/0.styles.7fdb3e19.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-path-recording-and-coding/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://jackluson.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/jackluson/learn-path-recording-and-coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://jackluson.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/jackluson/learn-path-recording-and-coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-path-recording-and-coding/javascript/" class="sidebar-link">Introduction</a></li><li><a href="/learn-path-recording-and-coding/javascript/browser.html" class="sidebar-link">About BOM and DOM 高级API</a></li><li><a href="/learn-path-recording-and-coding/javascript/eventloop.html" class="sidebar-link">EventLoop的理解</a></li><li><a href="/learn-path-recording-and-coding/javascript/further_eventloop.html" class="sidebar-link">EventLoop 的小记 -- 微任务是否造成页面阻塞</a></li><li><a href="/learn-path-recording-and-coding/javascript/js-engine.html" class="sidebar-link">JavaScript 运行原理细节</a></li><li><a href="/learn-path-recording-and-coding/javascript/design-patterns.html" class="sidebar-link">javascript 设计模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>持续集成&amp;自动化部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-path-recording-and-coding/develop-flow/" class="sidebar-link">Introduction</a></li><li><a href="/learn-path-recording-and-coding/develop-flow/gitlab-with-jenkins.html" class="sidebar-link">利用 Gitlab CI/CD + Jenkins 实现自动构建，自动部署</a></li><li><a href="/learn-path-recording-and-coding/develop-flow/dingtalk-gitlab.html" class="sidebar-link">引入钉钉机器人通知 Gitlab CI/CD 的构建状态</a></li><li><a href="/learn-path-recording-and-coding/develop-flow/travis-test.html" class="sidebar-link">Travis 认识及实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>框架&amp;库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-path-recording-and-coding/library/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/learn-path-recording-and-coding/library/react-test-library.html" class="sidebar-link">react 项目单元测试技术方案</a></li><li><a href="/learn-path-recording-and-coding/library/vue-cli3-typescript.html" aria-current="page" class="active sidebar-link">如何引进 Typescript 到现存 Vue-cli3+项目中</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn-path-recording-and-coding/library/vue-cli3-typescript.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/learn-path-recording-and-coding/library/vue-cli3-typescript.html#_1-一个基于-vue-cli3-、支持-typescript-的新项目是怎么配置的" class="sidebar-link">1. 一个基于 vue-cli3+、支持 typescript 的新项目是怎么配置的？</a></li><li class="sidebar-sub-header"><a href="/learn-path-recording-and-coding/library/vue-cli3-typescript.html#_2-应用这些不同点到现存的项目中" class="sidebar-link">2. 应用这些不同点到现存的项目中</a></li><li class="sidebar-sub-header"><a href="/learn-path-recording-and-coding/library/vue-cli3-typescript.html#_3-因地制宜-根据项目具体情况配置" class="sidebar-link">3. 因地制宜，根据项目具体情况配置</a></li><li class="sidebar-sub-header"><a href="/learn-path-recording-and-coding/library/vue-cli3-typescript.html#_4-利用-ts-进行业务开发" class="sidebar-link">4.利用 ts 进行业务开发</a></li></ul></li><li><a href="/learn-path-recording-and-coding/library/vuepress.html" class="sidebar-link">VuePress的学习&amp;实践</a></li><li><a href="/learn-path-recording-and-coding/library/babel-parser.html" class="sidebar-link">babel编译认识&amp;实践（demo）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机基础&amp;原理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-path-recording-and-coding/basics-principle/" class="sidebar-link">Introduction</a></li><li><a href="/learn-path-recording-and-coding/basics-principle/process-thread.html" class="sidebar-link">计算机的进程和线程的理解</a></li><li><a href="/learn-path-recording-and-coding/basics-principle/dns-hijack.html" class="sidebar-link">你需要知道的“DNS劫持”--web安全篇（1）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>技术实现</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-path-recording-and-coding/tech/" class="sidebar-link">Introduction</a></li><li><a href="/learn-path-recording-and-coding/tech/real-time-video.html" class="sidebar-link">视频直播那些事</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>动效</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-path-recording-and-coding/effect/" class="sidebar-link">Introduction</a></li><li><a href="/learn-path-recording-and-coding/effect/percent-ring.html" class="sidebar-link">圆环百分比三种实现方式汇总</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="如何引进-typescript-到现存-vue-cli3-项目中"><a href="#如何引进-typescript-到现存-vue-cli3-项目中" class="header-anchor">#</a> 如何引进 Typescript 到现存 Vue-cli3+项目中</h1> <p><img src="https://cdn.nlark.com/yuque/0/2021/png/365160/1628517679069-6d107ddb-1b56-4b1d-bea6-481863c9f3f1.png#clientId=uee6969e3-26f5-4&amp;from=paste&amp;height=421&amp;id=ub085a507&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=439&amp;originWidth=750&amp;originalType=binary&amp;ratio=1&amp;size=25839&amp;status=done&amp;style=none&amp;taskId=u16571b65-f7b7-4a90-b564-6ce970171a1&amp;width=720" alt="image.png"></p> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>在把项目改造支持 Typescript 之后, 跑了几个迭代,也踩了一些坑。还好这些坑总体可控， 没翻车， 所以就写篇文章分享一下， 如果想要体验 vue+typescript 的同学可以看看。
之前配置的过程查找了很多资料，但大部分都是下面两种方案：</p> <ul><li>基于 vue-cli3+的全新的项目</li> <li>vue-cli2 的老项目引进 typescript</li></ul> <p>但是我们公司的项目在新建项目的时候并没有引入 typescript 的支持。如果后期想引入 typescript 呢，有没有一种**向后兼容（backward compatibility）**的方式整合到现有的项目中呢，既可支持 ts，也可以兼容 js，这样现有的代码就几乎不用改动了。
下面分三部分来描述 👇：</p> <ul><li>一个基于 vue-cli3+、支持 typescript 的新项目是怎么配置的？</li> <li>如何应用这些不同的配置到现存的项目中？</li> <li>因为子项目需要引入主模块的 app，还有 vue，element-ui 等等是以 extenal 引进来的，这些需要如何配置才不使 ts 报错？</li></ul> <h2 id="_1-一个基于-vue-cli3-、支持-typescript-的新项目是怎么配置的"><a href="#_1-一个基于-vue-cli3-、支持-typescript-的新项目是怎么配置的" class="header-anchor">#</a> 1. 一个基于 vue-cli3+、支持 typescript 的新项目是怎么配置的？</h2> <blockquote><p>开始之前，我们先了解一下 Typescript 是什么？为什么需要它，能给项目带来什么？(如果熟悉 typescript 的话，这部分可以跳过哈)</p></blockquote> <ul><li><strong>Typescript 是 JavaScript 的超集</strong></li></ul> <p>正如官方说描述: &quot;A superset of Javascript&quot;， Typescript 更接近面对对象语言， 支持更多的 JS 不能支持的语法：
例如，链式语法， <code>js: res &amp;&amp; res.data &amp;&amp; res.data.name</code> ; ts 的话： <code>res?.data?.name</code>  虽然 babel 也有类似的插件实现该语法 。
而且 ts 是向后兼容的, 也就 js 的语法都可以直接在 ts 都可以运用。</p> <ul><li><strong>更严谨，能提前避免一些 bug 出现， 同时有利后期项目的维护</strong></li></ul> <p>js 是解析式弱类型语言。比如，js 很多情况存在隐形转换，但是又是在运行时才报错, 这无疑给我们埋了很多未知的坑,特别是在一些大型项目中,所以一些大型项目都投入 ts 的怀抱，例如<a href="https://github.com/ant-design/ant-design" target="_blank" rel="noopener noreferrer">ant-design<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/microsoft/vscode" target="_blank" rel="noopener noreferrer">vscode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、 还有即将发布的 vue3 版本<a href="https://github.com/vuejs/vue-next" target="_blank" rel="noopener noreferrer">vue-next<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。 ts 是要编译成 js 才能在浏览器中执行的， 所以在编译过程中可以提示我们很多可能出现错误的地方， 我们以此纠正。</p> <ul><li><strong>更好的开发体验</strong></li></ul> <p>这个主要是编辑器更智能，更友好的提示。 我们现在的编辑器提示功能主要是借助一些 Snippets 插件实现的， 但是 ts 的 xx.d.ts 的声明文章对编辑器来说更智能，更友好。可以说申明文件写的越完整，编辑器越智能，例如
<img src="https://cdn.nlark.com/yuque/0/2020/png/365160/1597042737532-dbed3c63-e722-47b8-bf46-ba714e6fae61.png#height=137&amp;id=kYepm&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=137&amp;originWidth=573&amp;originalType=binary&amp;ratio=1&amp;size=7982&amp;status=done&amp;style=none&amp;width=573" alt="image.png"></p> <blockquote><p>现在很多 npm 包都有了自己的 typescript 声明文件了, 没有的话可以在<a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noopener noreferrer">DefinitelyTyped<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上面找找, 或者自己写声明文件, 例如上面我写的&quot;app&quot;</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;app&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> Store<span class="token punctuation">,</span> Module <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> IState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/store&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">type</span> <span class="token class-name">SubModuleOptions</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    store<span class="token operator">?</span><span class="token operator">:</span> Module<span class="token operator">&lt;</span>IState<span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">//TODO:Module&lt;S, R&gt; 中的R指的是rootState, 应该app主项目还没改造成typescript, 先用any</span>
    <span class="token function-variable function">generator</span><span class="token operator">:</span> <span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Vue<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">interface</span> <span class="token class-name">System</span> <span class="token punctuation">{</span>
    <span class="token function">registerModule</span><span class="token punctuation">(</span>subModuleOptions<span class="token operator">:</span> SubModuleOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> system<span class="token operator">:</span> System<span class="token punctuation">;</span>
  <span class="token keyword">let</span> utils<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> config<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> request<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> router<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> store<span class="token operator">:</span> Store<span class="token operator">&lt;</span>IState<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多关于 ts 的知识，请查看官方文档<a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">https://www.typescriptlang.org/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,网上也有很多文章描述采用 ts 的优点,缺点。 这里就不再展开了，下面开始我们的正式内容。ヾ(≧▽≦*)o</p> <h3 id="新建一个空的-vue-typescript-的项目"><a href="#新建一个空的-vue-typescript-的项目" class="header-anchor">#</a> 新建一个空的 vue+typescript 的项目</h3> <p>新建一个基于 vue-cli3+的 typescript 项目, 网上有很多这种文档, 比如<a href="https://segmentfault.com/a/1190000019905650" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000019905650<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 注意选择 <code>Use class-style component syntax?</code>  的时候我们选择 yes, 因为我们需要用类组件。
对比与不支持 typescript 的 vue 项目， 新的地方如下：</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>├─src
│  ├─main<span class="token punctuation">.</span>ts
│  ├─shims-tsx<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
│  └─shims-vue<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
├─tsconfig<span class="token punctuation">.</span>json
</code></pre></div><p>从名字可以看出这几个文件的作用， 但是这里我们先不用理会。 此外当然 package.json 和.eslintrc.js 中的配置也有些差别， 对比发现，其他 package.json 只是多了<code>vue-class-component、vue-property-decorator、typescript、@typescript-eslint/parser</code> 、@typescript-eslint/parser、@vue/cli-plugin-typescript、@vue/eslint-config-typescript   这几个包。</p> <h2 id="_2-应用这些不同点到现存的项目中"><a href="#_2-应用这些不同点到现存的项目中" class="header-anchor">#</a> 2. 应用这些不同点到现存的项目中</h2> <p>我们要怎样应用这些不同点到现有的项目中呢， 摸着石头过河，我们在同样的目录结构下直接复制这些不同的新文件过来， 然后增加 package.json 不存在的包， 修改 main.js 为 main.ts(这里可能有坑)， 复制.eslintrc.js 配置过来。
准备好这些之后， 删除 node_modules 重新 <code>npm install</code>  安装一次
​</p> <h2 id="_3-因地制宜-根据项目具体情况配置"><a href="#_3-因地制宜-根据项目具体情况配置" class="header-anchor">#</a> 3. 因地制宜，根据项目具体情况配置</h2> <p>直接运行项目的话，可能会报很多类似的？Cannot find module 'xxx' or its corresponding type declarations. 的错误， 这是因为找不到对应报的声明文件。 根据项目的具体情况，例如我们的项目 vue、vuex、element-ui、app 等是通过 externals 方式引入的， 所以在 package.json 中找不到对应的依赖， 这样的话也没有这些包声明文件。还好 vue、vuex、element-ui 是提供声明文件的， 我们只需要把这些包安装成开发依赖 devDependencies ，在后面的开发中我们就可以使用这些声明文件了。 但是 app 是主项目的 umd 包，也是没有申明文件的， 这时候我们就要针对 app 自己写声明文件了。 最简单的就是在 src 目录下新建一个 typings 目录，在创建一个 app.d.ts, <code>declare module &quot;app&quot;</code>  声明就可以了， 这样就不会报错了。 更多申明文件怎么写可以参考<a href="https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html" target="_blank" rel="noopener noreferrer">https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。 此外可能还有出现其他的错误， 比如 eslint 错误， 这些要根据具体错误具体解决了。</p> <h2 id="_4-利用-ts-进行业务开发"><a href="#_4-利用-ts-进行业务开发" class="header-anchor">#</a> 4.利用 ts 进行业务开发</h2> <p>搭建好 ts 的开发环境之后， 因为 ts 是向后兼容的，所以之前的业务代码全部不用改。后面用 ts 开发的话， 学会使用 ts、<a href="https://github.com/kaorun343/vue-property-decorator" target="_blank" rel="noopener noreferrer">vue-property-decorator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://github.com/vuejs/vue-class-component" target="_blank" rel="noopener noreferrer">vue-class-component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>就行了。 后面有机会可以写 tsconfig 的配置， 声明文件， vuex 这些内容了，感谢大家的阅读了， 有问题欢迎沟通哈。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/jackluson/learn-path-recording-and-coding/edit/master/docs/library/vue-cli3-typescript.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/9/2021, 2:45:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/learn-path-recording-and-coding/library/react-test-library.html" class="prev">
        react 项目单元测试技术方案
      </a></span> <span class="next"><a href="/learn-path-recording-and-coding/library/vuepress.html">
        VuePress的学习&amp;实践
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/learn-path-recording-and-coding/assets/js/app.ffc21df9.js" defer></script><script src="/learn-path-recording-and-coding/assets/js/2.bfcbf030.js" defer></script><script src="/learn-path-recording-and-coding/assets/js/29.05512e51.js" defer></script>
  </body>
</html>
